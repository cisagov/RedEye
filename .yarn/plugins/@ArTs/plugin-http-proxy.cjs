var $i=Object.defineProperty,wi=Object.defineProperties;var qi=Object.getOwnPropertyDescriptors;var Qr=Object.getOwnPropertySymbols;var Ii=Object.prototype.hasOwnProperty,Li=Object.prototype.propertyIsEnumerable;var et=(r,e,t)=>e in r?$i(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w=(r,e)=>{for(var t in e||(e={}))Ii.call(e,t)&&et(r,t,e[t]);if(Qr)for(var t of Qr(e))Li.call(e,t)&&et(r,t,e[t]);return r},rt=(r,e)=>wi(r,qi(e));var c=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var tt=c(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.boolean=void 0;var Di=function(r){switch(Object.prototype.toString.call(r)){case"[object String]":return["true","t","yes","y","on","1"].includes(r.trim().toLowerCase());case"[object Number]":return r.valueOf()===1;case"[object Boolean]":return r.valueOf();default:return!1}};be.boolean=Di});var nt=c(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.isBooleanable=void 0;var Ci=function(r){switch(Object.prototype.toString.call(r)){case"[object String]":return["true","t","yes","y","on","1","false","f","no","n","off","0"].includes(r.trim().toLowerCase());case"[object Number]":return[0,1].includes(r.valueOf());case"[object Boolean]":return!0;default:return!1}};_e.isBooleanable=Ci});var Re=c(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.isBooleanable=V.boolean=void 0;var Gi=tt();Object.defineProperty(V,"boolean",{enumerable:!0,get:function(){return Gi.boolean}});var ji=nt();Object.defineProperty(V,"isBooleanable",{enumerable:!0,get:function(){return ji.isBooleanable}})});var Ae=c((ac,st)=>{st.exports=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"});var fr=c((uc,ot)=>{"use strict";var it=Object.prototype.toString;ot.exports=function(e){var t=it.call(e),n=t==="[object Arguments]";return n||(n=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&it.call(e.callee)==="[object Function]"),n}});var gt=c((lc,dt)=>{"use strict";var ht;Object.keys||(Q=Object.prototype.hasOwnProperty,pr=Object.prototype.toString,at=fr(),hr=Object.prototype.propertyIsEnumerable,ut=!hr.call({toString:null},"toString"),lt=hr.call(function(){},"prototype"),ee=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ne=function(r){var e=r.constructor;return e&&e.prototype===r},ct={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ft=function(){if(typeof window>"u")return!1;for(var r in window)try{if(!ct["$"+r]&&Q.call(window,r)&&window[r]!==null&&typeof window[r]=="object")try{Ne(window[r])}catch{return!0}}catch{return!0}return!1}(),pt=function(r){if(typeof window>"u"||!ft)return Ne(r);try{return Ne(r)}catch{return!1}},ht=function(e){var t=e!==null&&typeof e=="object",n=pr.call(e)==="[object Function]",s=at(e),i=t&&pr.call(e)==="[object String]",o=[];if(!t&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var u=lt&&n;if(i&&e.length>0&&!Q.call(e,0))for(var l=0;l<e.length;++l)o.push(String(l));if(s&&e.length>0)for(var v=0;v<e.length;++v)o.push(String(v));else for(var a in e)!(u&&a==="prototype")&&Q.call(e,a)&&o.push(String(a));if(ut)for(var g=pt(e),f=0;f<ee.length;++f)!(g&&ee[f]==="constructor")&&Q.call(e,ee[f])&&o.push(ee[f]);return o});var Q,pr,at,hr,ut,lt,ee,Ne,ct,ft,pt;dt.exports=ht});var mt=c((cc,yt)=>{"use strict";var Mi=Array.prototype.slice,Ui=fr(),vt=Object.keys,xe=vt?function(e){return vt(e)}:gt(),Et=Object.keys;xe.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(n){return Ui(n)?Et(Mi.call(n)):Et(n)})}else Object.keys=xe;return Object.keys||xe};yt.exports=xe});var gr=c((fc,_t)=>{"use strict";var Xi=mt(),Fi=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Hi=Object.prototype.toString,Bi=Array.prototype.concat,dr=Object.defineProperty,Vi=function(r){return typeof r=="function"&&Hi.call(r)==="[object Function]"},ki=function(){var r={};try{dr(r,"x",{enumerable:!1,value:r});for(var e in r)return!1;return r.x===r}catch{return!1}},Ot=dr&&ki(),Yi=function(r,e,t,n){e in r&&(!Vi(n)||!n())||(Ot?dr(r,e,{configurable:!0,enumerable:!1,value:t,writable:!0}):r[e]=t)},bt=function(r,e){var t=arguments.length>2?arguments[2]:{},n=Xi(e);Fi&&(n=Bi.call(n,Object.getOwnPropertySymbols(e)));for(var s=0;s<n.length;s+=1)Yi(r,n[s],e[n[s]],t[n[s]])};bt.supportsDescriptors=!!Ot;_t.exports=bt});var vr=c((pc,Rt)=>{"use strict";Rt.exports=global});var Er=c((hc,At)=>{"use strict";var zi=vr();At.exports=function(){return typeof global!="object"||!global||global.Math!==Math||global.Array!==Array?zi:global}});var xt=c((dc,Nt)=>{"use strict";var Ji=gr(),Ki=Er();Nt.exports=function(){var e=Ki();if(Ji.supportsDescriptors){var t=Object.getOwnPropertyDescriptor(e,"globalThis");(!t||t.configurable&&(t.enumerable||t.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!1})}else(typeof globalThis!="object"||globalThis!==e)&&(e.globalThis=e);return e}});var yr=c((gc,St)=>{"use strict";var Wi=gr(),Zi=vr(),Tt=Er(),Qi=xt(),eo=Tt(),Pt=function(){return eo};Wi(Pt,{getPolyfill:Tt,implementation:Zi,shim:Qi});St.exports=Pt});var qt=c((mr,wt)=>{mr=wt.exports=ro;mr.getSerialize=$t;function ro(r,e,t,n){return JSON.stringify(r,$t(e,n),t)}function $t(r,e){var t=[],n=[];return e==null&&(e=function(s,i){return t[0]===i?"[Circular ~]":"[Circular ~."+n.slice(0,t.indexOf(i)).join(".")+"]"}),function(s,i){if(t.length>0){var o=t.indexOf(this);~o?t.splice(o+1):t.push(this),~o?n.splice(o,1/0,s):n.push(s),~t.indexOf(i)&&(i=e.call(this,s,i))}else t.push(i);return r==null?i:r.call(this,s,i)}}});var It=c(Te=>{(function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(o){return n(i(o),arguments)}function t(o,u){return e.apply(null,[o].concat(u||[]))}function n(o,u){var l=1,v=o.length,a,g="",f,p,E,D,G,B,Oe,j;for(f=0;f<v;f++)if(typeof o[f]=="string")g+=o[f];else if(typeof o[f]=="object"){if(E=o[f],E.keys)for(a=u[l],p=0;p<E.keys.length;p++){if(a==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',E.keys[p],E.keys[p-1]));a=a[E.keys[p]]}else E.param_no?a=u[E.param_no]:a=u[l++];if(r.not_type.test(E.type)&&r.not_primitive.test(E.type)&&a instanceof Function&&(a=a()),r.numeric_arg.test(E.type)&&typeof a!="number"&&isNaN(a))throw new TypeError(e("[sprintf] expecting number but found %T",a));switch(r.number.test(E.type)&&(Oe=a>=0),E.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,E.width?parseInt(E.width):0);break;case"e":a=E.precision?parseFloat(a).toExponential(E.precision):parseFloat(a).toExponential();break;case"f":a=E.precision?parseFloat(a).toFixed(E.precision):parseFloat(a);break;case"g":a=E.precision?String(Number(a.toPrecision(E.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=E.precision?a.substring(0,E.precision):a;break;case"t":a=String(!!a),a=E.precision?a.substring(0,E.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=E.precision?a.substring(0,E.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=E.precision?a.substring(0,E.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase();break}r.json.test(E.type)?g+=a:(r.number.test(E.type)&&(!Oe||E.sign)?(j=Oe?"+":"-",a=a.toString().replace(r.sign,"")):j="",G=E.pad_char?E.pad_char==="0"?"0":E.pad_char.charAt(1):" ",B=E.width-(j+a).length,D=E.width&&B>0?G.repeat(B):"",g+=E.align?j+a+D:G==="0"?j+D+a:D+j+a)}return g}var s=Object.create(null);function i(o){if(s[o])return s[o];for(var u=o,l,v=[],a=0;u;){if((l=r.text.exec(u))!==null)v.push(l[0]);else if((l=r.modulo.exec(u))!==null)v.push("%");else if((l=r.placeholder.exec(u))!==null){if(l[2]){a|=1;var g=[],f=l[2],p=[];if((p=r.key.exec(f))!==null)for(g.push(p[1]);(f=f.substring(p[0].length))!=="";)if((p=r.key_access.exec(f))!==null)g.push(p[1]);else if((p=r.index_access.exec(f))!==null)g.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");l[2]=g}else a|=2;if(a===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");v.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");u=u.substring(l[0].length)}return s[o]=v}typeof Te<"u"&&(Te.sprintf=e,Te.vsprintf=t),typeof window<"u"&&(window.sprintf=e,window.vsprintf=t,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:t}}))})()});var Or=c(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.logLevels=void 0;var to={debug:20,error:50,fatal:60,info:30,trace:10,warn:40};Pe.logLevels=to});var Ct=c($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.default=void 0;var no=Ar(Ae()),so=Ar(yr()),io=Ar(qt()),br=It(),Lt=Or();function Ar(r){return r&&r.__esModule?r:{default:r}}function _r(){return _r=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_r.apply(this,arguments)}function Dt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function x(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dt(Object(t),!0).forEach(function(n){oo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Dt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function oo(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ao=(0,so.default)(),re;no.default&&(re=require("domain"));var uo=()=>{if(!re)return{};let r=[],e=process.domain;if(!e||!e.parentDomain)return{};for(;e&&e.parentDomain;)e=e.parentDomain,e.roarr&&e.roarr.context&&r.push(e.roarr.context);let t={};for(let n of r)t=x(x({},t),n);return t},Se=()=>{if(!re)return{};let r=process.domain;if(r&&r.roarr&&r.roarr.context)return r.roarr.context;if(!r||!r.parentDomain)return{};for(;r&&r.parentDomain;)if(r=r.parentDomain,r.roarr&&r.roarr.context)return r.roarr.context;return{}},Rr=(r,e)=>{let t=(n,s,i,o,u,l,v,a,g,f)=>{let p=Date.now(),E=ao.ROARR.sequence++,D,G;if(typeof n=="string"){D=x(x({},Se()),e||{});let B=_r({},{a:n,b:s,c:i,d:o,e:u,f:l,g:v,h:a,i:g,k:f});G=Object.keys(B).map(cr=>B[cr]).reduce((cr,Si)=>cr+=typeof Si>"u"?0:1,0)===1?(0,br.sprintf)("%s",n):(0,br.sprintf)(n,s,i,o,u,l,v,a,g,f)}else{if(typeof s!="string")throw new TypeError("Message must be a string.");D=JSON.parse((0,io.default)(x(x(x({},Se()),e||{}),n))),G=(0,br.sprintf)(s,i,o,u,l,v,a,g,f)}r({context:D,message:G,sequence:E,time:p,version:"1.0.0"})};t.child=n=>typeof n=="function"?Rr(s=>{if(typeof n!="function")throw new TypeError("Unexpected state.");r(n(s))},e):Rr(r,x(x(x({},Se()),e),n)),t.getContext=()=>x(x({},Se()),e||{}),t.adopt=async(n,s)=>{if(!re)return n();let i=re.create();return i.run(()=>(i.roarr={context:x(x({},uo()),s)},n()))};for(let n of Object.keys(Lt.logLevels))t[n]=(s,i,o,u,l,v,a,g,f,p)=>t.child({logLevel:Lt.logLevels[n]})(s,i,o,u,l,v,a,g,f,p);return t},lo=Rr;$e.default=lo});var Mt=c(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.default=void 0;var Gt=Or(),jt=(r,e)=>{let t=(n,s,i,o,u,l,v,a,g,f)=>{};t.adopt=async n=>n(),t.child=n=>jt(r,e),t.getContext=()=>({});for(let n of Object.keys(Gt.logLevels))t[n]=(s,i,o,u,l,v,a,g,f,p)=>t.child({logLevel:Gt.logLevels[n]})(s,i,o,u,l,v,a,g,f,p);return t},co=jt;we.default=co});var Xt=c((Oc,Ut)=>{Ut.exports=function(e,t){for(var n=e.split("."),s=t.split("."),i=0;i<3;i++){var o=Number(n[i]),u=Number(s[i]);if(o>u)return 1;if(u>o)return-1;if(!isNaN(o)&&isNaN(u))return 1;if(isNaN(o)&&!isNaN(u))return-1}return 0}});var Ft=c((bc,fo)=>{fo.exports={author:{email:"gajus@gajus.com",name:"Gajus Kuizinas",url:"http://gajus.com"},ava:{babel:{compileAsTests:["test/helpers/**/*"]},files:["test/roarr/**/*"],require:["@babel/register"]},dependencies:{boolean:"^3.0.1","detect-node":"^2.0.4",globalthis:"^1.0.1","json-stringify-safe":"^5.0.1","semver-compare":"^1.0.0","sprintf-js":"^1.1.2"},description:"JSON logger for Node.js and browser.",devDependencies:{"@ava/babel":"^1.0.1","@babel/cli":"^7.11.6","@babel/core":"^7.11.6","@babel/node":"^7.10.5","@babel/plugin-transform-flow-strip-types":"^7.10.4","@babel/preset-env":"^7.11.5","@babel/register":"^7.11.5",ava:"^3.12.1","babel-plugin-istanbul":"^6.0.0","babel-plugin-transform-export-default-name":"^2.0.4",coveralls:"^3.1.0","domain-parent":"^1.0.0",eslint:"^7.9.0","eslint-config-canonical":"^24.1.1","flow-bin":"^0.133.0","flow-copy-source":"^2.0.9",gitdown:"^3.1.3",husky:"^4.3.0",nyc:"^15.1.0","semantic-release":"^17.1.1"},engines:{node:">=8.0"},husky:{hooks:{"pre-commit":"npm run lint && npm run test && npm run build","pre-push":"gitdown ./.README/README.md --output-file ./README.md --check"}},keywords:["log","logger","json"],main:"./dist/log.js",name:"roarr",nyc:{include:["src/**/*.js"],instrument:!1,reporter:["text-lcov"],require:["@babel/register"],sourceMap:!1},license:"BSD-3-Clause",repository:{type:"git",url:"git@github.com:gajus/roarr.git"},scripts:{build:"rm -fr ./dist && NODE_ENV=production babel ./src --out-dir ./dist --copy-files --source-maps && flow-copy-source src dist","create-readme":"gitdown ./.README/README.md --output-file ./README.md",dev:"NODE_ENV=production babel ./src --out-dir ./dist --copy-files --source-maps --watch",lint:"eslint ./src ./test && flow",test:"NODE_ENV=test ava --serial --verbose"},version:"2.15.4"}});var Ht=c(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.default=void 0;var po=r=>({write:e=>{r.write(e+`
`)}}),ho=()=>{let e=(process.env.ROARR_STREAM||"STDOUT").toUpperCase().toUpperCase()==="STDOUT"?process.stdout:process.stderr;return po(e)},go=ho;qe.default=go});var Vt=c(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.default=void 0;var vo=Tr(Ae()),Nr=Tr(Xt()),xr=Ft(),Eo=Tr(Ht());function Tr(r){return r&&r.__esModule?r:{default:r}}function Bt(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function Ie(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bt(Object(t),!0).forEach(function(n){yo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Bt(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function yo(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var mo=r=>{let e=(r.versions||[]).concat();e.sort(Nr.default);let t=!e.length||(0,Nr.default)(xr.version,e[e.length-1])===1;e.includes(xr.version)||e.push(xr.version),e.sort(Nr.default);let n=Ie(Ie({sequence:0},r),{},{versions:e});return vo.default&&(t||!n.write)&&(n=Ie(Ie({},n),(0,Eo.default)())),n},Oo=mo;Le.default=Oo});var kt=c(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});Object.defineProperty(te,"createLogger",{enumerable:!0,get:function(){return bo.default}});Object.defineProperty(te,"createMockLogger",{enumerable:!0,get:function(){return _o.default}});Object.defineProperty(te,"createRoarrInititialGlobalState",{enumerable:!0,get:function(){return Ro.default}});var bo=Pr(Ct()),_o=Pr(Mt()),Ro=Pr(Vt());function Pr(r){return r&&r.__esModule?r:{default:r}}});var Kt=c(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.default=k.ROARR=void 0;var Ao=Re(),No=zt(Ae()),xo=zt(yr()),$r=kt();function zt(r){return r&&r.__esModule?r:{default:r}}var Yt=(0,xo.default)(),Sr=Yt.ROARR=(0,$r.createRoarrInititialGlobalState)(Yt.ROARR||{});k.ROARR=Sr;var Jt=$r.createLogger;No.default&&((0,Ao.boolean)(process.env.ROARR_LOG||"")||(Jt=$r.createMockLogger));var To=Jt(r=>{if(Sr.write){let e=JSON.stringify(r);Sr.write(e)}});k.default=To});var ne=c(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.default=void 0;var Po=So(Kt());function So(r){return r&&r.__esModule?r:{default:r}}var $o=Po.default.child({package:"global-agent"}),wo=$o;De.default=wo});var se=c((Tc,Wt)=>{var qo="2.0.0",Io=Number.MAX_SAFE_INTEGER||9007199254740991,Lo=16;Wt.exports={SEMVER_SPEC_VERSION:qo,MAX_LENGTH:256,MAX_SAFE_INTEGER:Io,MAX_SAFE_COMPONENT_LENGTH:Lo}});var ie=c((Pc,Zt)=>{var Do=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};Zt.exports=Do});var M=c((C,Qt)=>{var{MAX_SAFE_COMPONENT_LENGTH:wr}=se(),Co=ie();C=Qt.exports={};var Go=C.re=[],h=C.src=[],d=C.t={},jo=0,y=(r,e,t)=>{let n=jo++;Co(n,e),d[r]=n,h[n]=e,Go[n]=new RegExp(e,t?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*");y("NUMERICIDENTIFIERLOOSE","[0-9]+");y("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");y("MAINVERSION",`(${h[d.NUMERICIDENTIFIER]})\\.(${h[d.NUMERICIDENTIFIER]})\\.(${h[d.NUMERICIDENTIFIER]})`);y("MAINVERSIONLOOSE",`(${h[d.NUMERICIDENTIFIERLOOSE]})\\.(${h[d.NUMERICIDENTIFIERLOOSE]})\\.(${h[d.NUMERICIDENTIFIERLOOSE]})`);y("PRERELEASEIDENTIFIER",`(?:${h[d.NUMERICIDENTIFIER]}|${h[d.NONNUMERICIDENTIFIER]})`);y("PRERELEASEIDENTIFIERLOOSE",`(?:${h[d.NUMERICIDENTIFIERLOOSE]}|${h[d.NONNUMERICIDENTIFIER]})`);y("PRERELEASE",`(?:-(${h[d.PRERELEASEIDENTIFIER]}(?:\\.${h[d.PRERELEASEIDENTIFIER]})*))`);y("PRERELEASELOOSE",`(?:-?(${h[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[d.PRERELEASEIDENTIFIERLOOSE]})*))`);y("BUILDIDENTIFIER","[0-9A-Za-z-]+");y("BUILD",`(?:\\+(${h[d.BUILDIDENTIFIER]}(?:\\.${h[d.BUILDIDENTIFIER]})*))`);y("FULLPLAIN",`v?${h[d.MAINVERSION]}${h[d.PRERELEASE]}?${h[d.BUILD]}?`);y("FULL",`^${h[d.FULLPLAIN]}$`);y("LOOSEPLAIN",`[v=\\s]*${h[d.MAINVERSIONLOOSE]}${h[d.PRERELEASELOOSE]}?${h[d.BUILD]}?`);y("LOOSE",`^${h[d.LOOSEPLAIN]}$`);y("GTLT","((?:<|>)?=?)");y("XRANGEIDENTIFIERLOOSE",`${h[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);y("XRANGEIDENTIFIER",`${h[d.NUMERICIDENTIFIER]}|x|X|\\*`);y("XRANGEPLAIN",`[v=\\s]*(${h[d.XRANGEIDENTIFIER]})(?:\\.(${h[d.XRANGEIDENTIFIER]})(?:\\.(${h[d.XRANGEIDENTIFIER]})(?:${h[d.PRERELEASE]})?${h[d.BUILD]}?)?)?`);y("XRANGEPLAINLOOSE",`[v=\\s]*(${h[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[d.XRANGEIDENTIFIERLOOSE]})(?:${h[d.PRERELEASELOOSE]})?${h[d.BUILD]}?)?)?`);y("XRANGE",`^${h[d.GTLT]}\\s*${h[d.XRANGEPLAIN]}$`);y("XRANGELOOSE",`^${h[d.GTLT]}\\s*${h[d.XRANGEPLAINLOOSE]}$`);y("COERCE",`(^|[^\\d])(\\d{1,${wr}})(?:\\.(\\d{1,${wr}}))?(?:\\.(\\d{1,${wr}}))?(?:$|[^\\d])`);y("COERCERTL",h[d.COERCE],!0);y("LONETILDE","(?:~>?)");y("TILDETRIM",`(\\s*)${h[d.LONETILDE]}\\s+`,!0);C.tildeTrimReplace="$1~";y("TILDE",`^${h[d.LONETILDE]}${h[d.XRANGEPLAIN]}$`);y("TILDELOOSE",`^${h[d.LONETILDE]}${h[d.XRANGEPLAINLOOSE]}$`);y("LONECARET","(?:\\^)");y("CARETTRIM",`(\\s*)${h[d.LONECARET]}\\s+`,!0);C.caretTrimReplace="$1^";y("CARET",`^${h[d.LONECARET]}${h[d.XRANGEPLAIN]}$`);y("CARETLOOSE",`^${h[d.LONECARET]}${h[d.XRANGEPLAINLOOSE]}$`);y("COMPARATORLOOSE",`^${h[d.GTLT]}\\s*(${h[d.LOOSEPLAIN]})$|^$`);y("COMPARATOR",`^${h[d.GTLT]}\\s*(${h[d.FULLPLAIN]})$|^$`);y("COMPARATORTRIM",`(\\s*)${h[d.GTLT]}\\s*(${h[d.LOOSEPLAIN]}|${h[d.XRANGEPLAIN]})`,!0);C.comparatorTrimReplace="$1$2$3";y("HYPHENRANGE",`^\\s*(${h[d.XRANGEPLAIN]})\\s+-\\s+(${h[d.XRANGEPLAIN]})\\s*$`);y("HYPHENRANGELOOSE",`^\\s*(${h[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[d.XRANGEPLAINLOOSE]})\\s*$`);y("STAR","(<|>)?=?\\s*\\*");y("GTE0","^\\s*>=\\s*0.0.0\\s*$");y("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var oe=c((Sc,en)=>{var Mo=["includePrerelease","loose","rtl"],Uo=r=>r?typeof r!="object"?{loose:!0}:Mo.filter(e=>r[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};en.exports=Uo});var Ce=c(($c,nn)=>{var rn=/^[0-9]+$/,tn=(r,e)=>{let t=rn.test(r),n=rn.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},Xo=(r,e)=>tn(e,r);nn.exports={compareIdentifiers:tn,rcompareIdentifiers:Xo}});var R=c((wc,un)=>{var Ge=ie(),{MAX_LENGTH:sn,MAX_SAFE_INTEGER:je}=se(),{re:on,t:an}=M(),Fo=oe(),{compareIdentifiers:ae}=Ce(),T=class{constructor(e,t){if(t=Fo(t),e instanceof T){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>sn)throw new TypeError(`version is longer than ${sn} characters`);Ge("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?on[an.LOOSE]:on[an.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>je||this.major<0)throw new TypeError("Invalid major version");if(this.minor>je||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>je||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<je)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ge("SemVer.compare",this.version,this.options,e),!(e instanceof T)){if(typeof e=="string"&&e===this.version)return 0;e=new T(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof T||(e=new T(e,this.options)),ae(this.major,e.major)||ae(this.minor,e.minor)||ae(this.patch,e.patch)}comparePre(e){if(e instanceof T||(e=new T(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(Ge("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ae(n,s)}while(++t)}compareBuild(e){e instanceof T||(e=new T(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(Ge("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ae(n,s)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};un.exports=T});var U=c((qc,pn)=>{var{MAX_LENGTH:Ho}=se(),{re:ln,t:cn}=M(),fn=R(),Bo=oe(),Vo=(r,e)=>{if(e=Bo(e),r instanceof fn)return r;if(typeof r!="string"||r.length>Ho||!(e.loose?ln[cn.LOOSE]:ln[cn.FULL]).test(r))return null;try{return new fn(r,e)}catch{return null}};pn.exports=Vo});var dn=c((Ic,hn)=>{var ko=U(),Yo=(r,e)=>{let t=ko(r,e);return t?t.version:null};hn.exports=Yo});var vn=c((Lc,gn)=>{var zo=U(),Jo=(r,e)=>{let t=zo(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};gn.exports=Jo});var yn=c((Dc,En)=>{var Ko=R(),Wo=(r,e,t,n)=>{typeof t=="string"&&(n=t,t=void 0);try{return new Ko(r,t).inc(e,n).version}catch{return null}};En.exports=Wo});var P=c((Cc,On)=>{var mn=R(),Zo=(r,e,t)=>new mn(r,t).compare(new mn(e,t));On.exports=Zo});var Me=c((Gc,bn)=>{var Qo=P(),ea=(r,e,t)=>Qo(r,e,t)===0;bn.exports=ea});var An=c((jc,Rn)=>{var _n=U(),ra=Me(),ta=(r,e)=>{if(ra(r,e))return null;{let t=_n(r),n=_n(e),s=t.prerelease.length||n.prerelease.length,i=s?"pre":"",o=s?"prerelease":"";for(let u in t)if((u==="major"||u==="minor"||u==="patch")&&t[u]!==n[u])return i+u;return o}};Rn.exports=ta});var xn=c((Mc,Nn)=>{var na=R(),sa=(r,e)=>new na(r,e).major;Nn.exports=sa});var Pn=c((Uc,Tn)=>{var ia=R(),oa=(r,e)=>new ia(r,e).minor;Tn.exports=oa});var $n=c((Xc,Sn)=>{var aa=R(),ua=(r,e)=>new aa(r,e).patch;Sn.exports=ua});var qn=c((Fc,wn)=>{var la=U(),ca=(r,e)=>{let t=la(r,e);return t&&t.prerelease.length?t.prerelease:null};wn.exports=ca});var Ln=c((Hc,In)=>{var fa=P(),pa=(r,e,t)=>fa(e,r,t);In.exports=pa});var Cn=c((Bc,Dn)=>{var ha=P(),da=(r,e)=>ha(r,e,!0);Dn.exports=da});var Ue=c((Vc,jn)=>{var Gn=R(),ga=(r,e,t)=>{let n=new Gn(r,t),s=new Gn(e,t);return n.compare(s)||n.compareBuild(s)};jn.exports=ga});var Un=c((kc,Mn)=>{var va=Ue(),Ea=(r,e)=>r.sort((t,n)=>va(t,n,e));Mn.exports=Ea});var Fn=c((Yc,Xn)=>{var ya=Ue(),ma=(r,e)=>r.sort((t,n)=>ya(n,t,e));Xn.exports=ma});var ue=c((zc,Hn)=>{var Oa=P(),ba=(r,e,t)=>Oa(r,e,t)>0;Hn.exports=ba});var Xe=c((Jc,Bn)=>{var _a=P(),Ra=(r,e,t)=>_a(r,e,t)<0;Bn.exports=Ra});var qr=c((Kc,Vn)=>{var Aa=P(),Na=(r,e,t)=>Aa(r,e,t)!==0;Vn.exports=Na});var Fe=c((Wc,kn)=>{var xa=P(),Ta=(r,e,t)=>xa(r,e,t)>=0;kn.exports=Ta});var He=c((Zc,Yn)=>{var Pa=P(),Sa=(r,e,t)=>Pa(r,e,t)<=0;Yn.exports=Sa});var Ir=c((Qc,zn)=>{var $a=Me(),wa=qr(),qa=ue(),Ia=Fe(),La=Xe(),Da=He(),Ca=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return $a(r,t,n);case"!=":return wa(r,t,n);case">":return qa(r,t,n);case">=":return Ia(r,t,n);case"<":return La(r,t,n);case"<=":return Da(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};zn.exports=Ca});var Kn=c((ef,Jn)=>{var Ga=R(),ja=U(),{re:Be,t:Ve}=M(),Ma=(r,e)=>{if(r instanceof Ga)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(Be[Ve.COERCE]);else{let n;for(;(n=Be[Ve.COERCERTL].exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),Be[Ve.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Be[Ve.COERCERTL].lastIndex=-1}return t===null?null:ja(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};Jn.exports=Ma});var Zn=c((rf,Wn)=>{"use strict";Wn.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var es=c((tf,Qn)=>{"use strict";Qn.exports=m;m.Node=X;m.create=m;function m(r){var e=this;if(e instanceof m||(e=new m),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}m.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};m.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};m.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};m.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)Xa(this,arguments[r]);return this.length};m.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)Fa(this,arguments[r]);return this.length};m.prototype.pop=function(){if(!!this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};m.prototype.shift=function(){if(!!this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};m.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};m.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};m.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};m.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};m.prototype.map=function(r,e){e=e||this;for(var t=new m,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};m.prototype.mapReverse=function(r,e){e=e||this;for(var t=new m,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};m.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)t=r(t,n.value,s),n=n.next;return t};m.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)t=r(t,n.value,s),n=n.prev;return t};m.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};m.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};m.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new m;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)t.push(s.value);return t};m.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new m;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>r;n--,s=s.prev)t.push(s.value);return t};m.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(var i=[],n=0;s&&n<e;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<t.length;n++)s=Ua(this,s,t[n]);return i};m.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function Ua(r,e,t){var n=e===r.head?new X(t,null,e,r):new X(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function Xa(r,e){r.tail=new X(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function Fa(r,e){r.head=new X(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function X(r,e,t,n){if(!(this instanceof X))return new X(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Zn()(m)}catch{}});var as=c((nf,os)=>{"use strict";var Ha=es(),F=Symbol("max"),L=Symbol("length"),Y=Symbol("lengthCalculator"),ce=Symbol("allowStale"),H=Symbol("maxAge"),I=Symbol("dispose"),rs=Symbol("noDisposeOnSet"),b=Symbol("lruList"),$=Symbol("cache"),ns=Symbol("updateAgeOnGet"),Lr=()=>1,ss=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[F]=e.max||1/0,n=e.length||Lr;if(this[Y]=typeof n!="function"?Lr:n,this[ce]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[H]=e.maxAge||0,this[I]=e.dispose,this[rs]=e.noDisposeOnSet||!1,this[ns]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[F]=e||1/0,le(this)}get max(){return this[F]}set allowStale(e){this[ce]=!!e}get allowStale(){return this[ce]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[H]=e,le(this)}get maxAge(){return this[H]}set lengthCalculator(e){typeof e!="function"&&(e=Lr),e!==this[Y]&&(this[Y]=e,this[L]=0,this[b].forEach(t=>{t.length=this[Y](t.value,t.key),this[L]+=t.length})),le(this)}get lengthCalculator(){return this[Y]}get length(){return this[L]}get itemCount(){return this[b].length}rforEach(e,t){t=t||this;for(let n=this[b].tail;n!==null;){let s=n.prev;ts(this,e,n,t),n=s}}forEach(e,t){t=t||this;for(let n=this[b].head;n!==null;){let s=n.next;ts(this,e,n,t),n=s}}keys(){return this[b].toArray().map(e=>e.key)}values(){return this[b].toArray().map(e=>e.value)}reset(){this[I]&&this[b]&&this[b].length&&this[b].forEach(e=>this[I](e.key,e.value)),this[$]=new Map,this[b]=new Ha,this[L]=0}dump(){return this[b].map(e=>ke(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[b]}set(e,t,n){if(n=n||this[H],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[Y](t,e);if(this[$].has(e)){if(i>this[F])return z(this,this[$].get(e)),!1;let l=this[$].get(e).value;return this[I]&&(this[rs]||this[I](e,l.value)),l.now=s,l.maxAge=n,l.value=t,this[L]+=i-l.length,l.length=i,this.get(e),le(this),!0}let o=new is(e,t,i,s,n);return o.length>this[F]?(this[I]&&this[I](e,t),!1):(this[L]+=o.length,this[b].unshift(o),this[$].set(e,this[b].head),le(this),!0)}has(e){if(!this[$].has(e))return!1;let t=this[$].get(e).value;return!ke(this,t)}get(e){return Dr(this,e,!0)}peek(e){return Dr(this,e,!1)}pop(){let e=this[b].tail;return e?(z(this,e),e.value):null}del(e){z(this,this[$].get(e))}load(e){this.reset();let t=Date.now();for(let n=e.length-1;n>=0;n--){let s=e[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-t;o>0&&this.set(s.k,s.v,o)}}}prune(){this[$].forEach((e,t)=>Dr(this,t,!1))}},Dr=(r,e,t)=>{let n=r[$].get(e);if(n){let s=n.value;if(ke(r,s)){if(z(r,n),!r[ce])return}else t&&(r[ns]&&(n.value.now=Date.now()),r[b].unshiftNode(n));return s.value}},ke=(r,e)=>{if(!e||!e.maxAge&&!r[H])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[H]&&t>r[H]},le=r=>{if(r[L]>r[F])for(let e=r[b].tail;r[L]>r[F]&&e!==null;){let t=e.prev;z(r,e),e=t}},z=(r,e)=>{if(e){let t=e.value;r[I]&&r[I](t.key,t.value),r[L]-=t.length,r[$].delete(t.key),r[b].removeNode(e)}},is=class{constructor(e,t,n,s,i){this.key=e,this.value=t,this.length=n,this.now=s,this.maxAge=i||0}},ts=(r,e,t,n)=>{let s=t.value;ke(r,s)&&(z(r,t),r[ce]||(s=void 0)),s&&e.call(n,s.value,s.key,r)};os.exports=ss});var S=c((sf,fs)=>{var J=class{constructor(e,t){if(t=Va(t),e instanceof J)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new J(e.raw,t);if(e instanceof Cr)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!ls(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&Ka(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,s=us.get(n);if(s)return s;let i=this.options.loose,o=i?A[_.HYPHENRANGELOOSE]:A[_.HYPHENRANGE];e=e.replace(o,ou(this.options.includePrerelease)),O("hyphen replace",e),e=e.replace(A[_.COMPARATORTRIM],Ya),O("comparator trim",e,A[_.COMPARATORTRIM]),e=e.replace(A[_.TILDETRIM],za),e=e.replace(A[_.CARETTRIM],Ja),e=e.split(/\s+/).join(" ");let u=i?A[_.COMPARATORLOOSE]:A[_.COMPARATOR],l=e.split(" ").map(f=>Wa(f,this.options)).join(" ").split(/\s+/).map(f=>iu(f,this.options)).filter(this.options.loose?f=>!!f.match(u):()=>!0).map(f=>new Cr(f,this.options)),v=l.length,a=new Map;for(let f of l){if(ls(f))return[f];a.set(f.value,f)}a.size>1&&a.has("")&&a.delete("");let g=[...a.values()];return us.set(n,g),g}intersects(e,t){if(!(e instanceof J))throw new TypeError("a Range is required");return this.set.some(n=>cs(n,t)&&e.set.some(s=>cs(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ka(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(au(this.set[t],e,this.options))return!0;return!1}};fs.exports=J;var Ba=as(),us=new Ba({max:1e3}),Va=oe(),Cr=fe(),O=ie(),ka=R(),{re:A,t:_,comparatorTrimReplace:Ya,tildeTrimReplace:za,caretTrimReplace:Ja}=M(),ls=r=>r.value==="<0.0.0-0",Ka=r=>r.value==="",cs=(r,e)=>{let t=!0,n=r.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,e)),s=n.pop();return t},Wa=(r,e)=>(O("comp",r,e),r=eu(r,e),O("caret",r),r=Za(r,e),O("tildes",r),r=tu(r,e),O("xrange",r),r=su(r,e),O("stars",r),r),N=r=>!r||r.toLowerCase()==="x"||r==="*",Za=(r,e)=>r.trim().split(/\s+/).map(t=>Qa(t,e)).join(" "),Qa=(r,e)=>{let t=e.loose?A[_.TILDELOOSE]:A[_.TILDE];return r.replace(t,(n,s,i,o,u)=>{O("tilde",r,n,s,i,o,u);let l;return N(s)?l="":N(i)?l=`>=${s}.0.0 <${+s+1}.0.0-0`:N(o)?l=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:u?(O("replaceTilde pr",u),l=`>=${s}.${i}.${o}-${u} <${s}.${+i+1}.0-0`):l=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,O("tilde return",l),l})},eu=(r,e)=>r.trim().split(/\s+/).map(t=>ru(t,e)).join(" "),ru=(r,e)=>{O("caret",r,e);let t=e.loose?A[_.CARETLOOSE]:A[_.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(s,i,o,u,l)=>{O("caret",r,s,i,o,u,l);let v;return N(i)?v="":N(o)?v=`>=${i}.0.0${n} <${+i+1}.0.0-0`:N(u)?i==="0"?v=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:v=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:l?(O("replaceCaret pr",l),i==="0"?o==="0"?v=`>=${i}.${o}.${u}-${l} <${i}.${o}.${+u+1}-0`:v=`>=${i}.${o}.${u}-${l} <${i}.${+o+1}.0-0`:v=`>=${i}.${o}.${u}-${l} <${+i+1}.0.0-0`):(O("no pr"),i==="0"?o==="0"?v=`>=${i}.${o}.${u}${n} <${i}.${o}.${+u+1}-0`:v=`>=${i}.${o}.${u}${n} <${i}.${+o+1}.0-0`:v=`>=${i}.${o}.${u} <${+i+1}.0.0-0`),O("caret return",v),v})},tu=(r,e)=>(O("replaceXRanges",r,e),r.split(/\s+/).map(t=>nu(t,e)).join(" ")),nu=(r,e)=>{r=r.trim();let t=e.loose?A[_.XRANGELOOSE]:A[_.XRANGE];return r.replace(t,(n,s,i,o,u,l)=>{O("xRange",r,n,s,i,o,u,l);let v=N(i),a=v||N(o),g=a||N(u),f=g;return s==="="&&f&&(s=""),l=e.includePrerelease?"-0":"",v?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&f?(a&&(o=0),u=0,s===">"?(s=">=",a?(i=+i+1,o=0,u=0):(o=+o+1,u=0)):s==="<="&&(s="<",a?i=+i+1:o=+o+1),s==="<"&&(l="-0"),n=`${s+i}.${o}.${u}${l}`):a?n=`>=${i}.0.0${l} <${+i+1}.0.0-0`:g&&(n=`>=${i}.${o}.0${l} <${i}.${+o+1}.0-0`),O("xRange return",n),n})},su=(r,e)=>(O("replaceStars",r,e),r.trim().replace(A[_.STAR],"")),iu=(r,e)=>(O("replaceGTE0",r,e),r.trim().replace(A[e.includePrerelease?_.GTE0PRE:_.GTE0],"")),ou=r=>(e,t,n,s,i,o,u,l,v,a,g,f,p)=>(N(n)?t="":N(s)?t=`>=${n}.0.0${r?"-0":""}`:N(i)?t=`>=${n}.${s}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,N(v)?l="":N(a)?l=`<${+v+1}.0.0-0`:N(g)?l=`<${v}.${+a+1}.0-0`:f?l=`<=${v}.${a}.${g}-${f}`:r?l=`<${v}.${a}.${+g+1}-0`:l=`<=${l}`,`${t} ${l}`.trim()),au=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(O(r[n].semver),r[n].semver!==Cr.ANY&&r[n].semver.prerelease.length>0){let s=r[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var fe=c((of,vs)=>{var pe=Symbol("SemVer ANY"),he=class{static get ANY(){return pe}constructor(e,t){if(t=uu(t),e instanceof he){if(e.loose===!!t.loose)return e;e=e.value}jr("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===pe?this.value="":this.value=this.operator+this.semver.version,jr("comp",this)}parse(e){let t=this.options.loose?ps[hs.COMPARATORLOOSE]:ps[hs.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new ds(n[2],this.options.loose):this.semver=pe}toString(){return this.value}test(e){if(jr("Comparator.test",e,this.options.loose),this.semver===pe||e===pe)return!0;if(typeof e=="string")try{e=new ds(e,this.options)}catch{return!1}return Gr(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof he))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new gs(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new gs(this.value,t).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),s=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),i=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),u=Gr(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),l=Gr(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||s||i&&o||u||l}};vs.exports=he;var uu=oe(),{re:ps,t:hs}=M(),Gr=Ir(),jr=ie(),ds=R(),gs=S()});var de=c((af,Es)=>{var lu=S(),cu=(r,e,t)=>{try{e=new lu(e,t)}catch{return!1}return e.test(r)};Es.exports=cu});var ms=c((uf,ys)=>{var fu=S(),pu=(r,e)=>new fu(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));ys.exports=pu});var bs=c((lf,Os)=>{var hu=R(),du=S(),gu=(r,e,t)=>{let n=null,s=null,i=null;try{i=new du(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new hu(n,t))}),n};Os.exports=gu});var Rs=c((cf,_s)=>{var vu=R(),Eu=S(),yu=(r,e,t)=>{let n=null,s=null,i=null;try{i=new Eu(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new vu(n,t))}),n};_s.exports=yu});var xs=c((ff,Ns)=>{var Mr=R(),mu=S(),As=ue(),Ou=(r,e)=>{r=new mu(r,e);let t=new Mr("0.0.0");if(r.test(t)||(t=new Mr("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let s=r.set[n],i=null;s.forEach(o=>{let u=new Mr(o.semver.version);switch(o.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!i||As(u,i))&&(i=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||As(t,i))&&(t=i)}return t&&r.test(t)?t:null};Ns.exports=Ou});var Ps=c((pf,Ts)=>{var bu=S(),_u=(r,e)=>{try{return new bu(r,e).range||"*"}catch{return null}};Ts.exports=_u});var Ye=c((hf,qs)=>{var Ru=R(),ws=fe(),{ANY:Au}=ws,Nu=S(),xu=de(),Ss=ue(),$s=Xe(),Tu=He(),Pu=Fe(),Su=(r,e,t,n)=>{r=new Ru(r,n),e=new Nu(e,n);let s,i,o,u,l;switch(t){case">":s=Ss,i=Tu,o=$s,u=">",l=">=";break;case"<":s=$s,i=Pu,o=Ss,u="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(xu(r,e,n))return!1;for(let v=0;v<e.set.length;++v){let a=e.set[v],g=null,f=null;if(a.forEach(p=>{p.semver===Au&&(p=new ws(">=0.0.0")),g=g||p,f=f||p,s(p.semver,g.semver,n)?g=p:o(p.semver,f.semver,n)&&(f=p)}),g.operator===u||g.operator===l||(!f.operator||f.operator===u)&&i(r,f.semver))return!1;if(f.operator===l&&o(r,f.semver))return!1}return!0};qs.exports=Su});var Ls=c((df,Is)=>{var $u=Ye(),wu=(r,e,t)=>$u(r,e,">",t);Is.exports=wu});var Cs=c((gf,Ds)=>{var qu=Ye(),Iu=(r,e,t)=>qu(r,e,"<",t);Ds.exports=Iu});var Ms=c((vf,js)=>{var Gs=S(),Lu=(r,e,t)=>(r=new Gs(r,t),e=new Gs(e,t),r.intersects(e));js.exports=Lu});var Xs=c((Ef,Us)=>{var Du=de(),Cu=P();Us.exports=(r,e,t)=>{let n=[],s=null,i=null,o=r.sort((a,g)=>Cu(a,g,t));for(let a of o)Du(a,e,t)?(i=a,s||(s=a)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let u=[];for(let[a,g]of n)a===g?u.push(a):!g&&a===o[0]?u.push("*"):g?a===o[0]?u.push(`<=${g}`):u.push(`${a} - ${g}`):u.push(`>=${a}`);let l=u.join(" || "),v=typeof e.raw=="string"?e.raw:String(e);return l.length<v.length?l:e}});var ks=c((yf,Vs)=>{var Fs=S(),ze=fe(),{ANY:Ur}=ze,ge=de(),Xr=P(),Gu=(r,e,t={})=>{if(r===e)return!0;r=new Fs(r,t),e=new Fs(e,t);let n=!1;e:for(let s of r.set){for(let i of e.set){let o=ju(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},ju=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===Ur){if(e.length===1&&e[0].semver===Ur)return!0;t.includePrerelease?r=[new ze(">=0.0.0-0")]:r=[new ze(">=0.0.0")]}if(e.length===1&&e[0].semver===Ur){if(t.includePrerelease)return!0;e=[new ze(">=0.0.0")]}let n=new Set,s,i;for(let p of r)p.operator===">"||p.operator===">="?s=Hs(s,p,t):p.operator==="<"||p.operator==="<="?i=Bs(i,p,t):n.add(p.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Xr(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let p of n){if(s&&!ge(p,String(s),t)||i&&!ge(p,String(i),t))return null;for(let E of e)if(!ge(p,String(E),t))return!1;return!0}let u,l,v,a,g=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,f=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;g&&g.prerelease.length===1&&i.operator==="<"&&g.prerelease[0]===0&&(g=!1);for(let p of e){if(a=a||p.operator===">"||p.operator===">=",v=v||p.operator==="<"||p.operator==="<=",s){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(u=Hs(s,p,t),u===p&&u!==s)return!1}else if(s.operator===">="&&!ge(s.semver,String(p),t))return!1}if(i){if(g&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===g.major&&p.semver.minor===g.minor&&p.semver.patch===g.patch&&(g=!1),p.operator==="<"||p.operator==="<="){if(l=Bs(i,p,t),l===p&&l!==i)return!1}else if(i.operator==="<="&&!ge(i.semver,String(p),t))return!1}if(!p.operator&&(i||s)&&o!==0)return!1}return!(s&&v&&!i&&o!==0||i&&a&&!s&&o!==0||f||g)},Hs=(r,e,t)=>{if(!r)return e;let n=Xr(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},Bs=(r,e,t)=>{if(!r)return e;let n=Xr(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};Vs.exports=Gu});var zs=c((mf,Ys)=>{var Fr=M();Ys.exports={re:Fr.re,src:Fr.src,tokens:Fr.t,SEMVER_SPEC_VERSION:se().SEMVER_SPEC_VERSION,SemVer:R(),compareIdentifiers:Ce().compareIdentifiers,rcompareIdentifiers:Ce().rcompareIdentifiers,parse:U(),valid:dn(),clean:vn(),inc:yn(),diff:An(),major:xn(),minor:Pn(),patch:$n(),prerelease:qn(),compare:P(),rcompare:Ln(),compareLoose:Cn(),compareBuild:Ue(),sort:Un(),rsort:Fn(),gt:ue(),lt:Xe(),eq:Me(),neq:qr(),gte:Fe(),lte:He(),cmp:Ir(),coerce:Kn(),Comparator:fe(),Range:S(),satisfies:de(),toComparators:ms(),maxSatisfying:bs(),minSatisfying:Rs(),minVersion:xs(),validRange:Ps(),outside:Ye(),gtr:Ls(),ltr:Cs(),intersects:Ms(),simplifyRange:Xs(),subset:ks()}});var Ks=c((Of,Js)=>{"use strict";var ve=class extends Error{constructor(e){super(ve._prepareSuperMessage(e));Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,ve)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},Mu=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],Hr=({from:r,seen:e,to_:t,forceEnumerable:n})=>{let s=t||(Array.isArray(r)?[]:{});e.push(r);for(let[i,o]of Object.entries(r))if(typeof o!="function"){if(!o||typeof o!="object"){s[i]=o;continue}if(!e.includes(r[i])){s[i]=Hr({from:r[i],seen:e.slice(),forceEnumerable:n});continue}s[i]="[Circular]"}for(let{property:i,enumerable:o}of Mu)typeof r[i]=="string"&&Object.defineProperty(s,i,{value:r[i],enumerable:n?!0:o,configurable:!0,writable:!0});return s},Uu=r=>typeof r=="object"&&r!==null?Hr({from:r,seen:[],forceEnumerable:!0}):typeof r=="function"?`[Function: ${r.name||"anonymous"}]`:r,Xu=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null&&!Array.isArray(r)){let e=new Error;return Hr({from:r,seen:[],to_:e}),e}return new ve(r)};Js.exports={serializeError:Uu,deserializeError:Xu}});var Ke=c(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.default=void 0;var Ws=Ks(),Fu=Re(),Hu=Bu(ne());function Bu(r){return r&&r.__esModule?r:{default:r}}var q=Hu.default.child({namespace:"Agent"}),Vu=0,Zs=class{constructor(e,t,n,s,i){this.fallbackAgent=s,this.isProxyConfigured=e,this.mustUrlUseProxy=t,this.getUrlProxy=n,this.socketConnectionTimeout=i}addRequest(e,t){let n;if(e.path.startsWith("http://")||e.path.startsWith("https://")?n=e.path:n=this.protocol+"//"+(t.hostname||t.host)+(t.port===80||t.port===443?"":":"+t.port)+e.path,!this.isProxyConfigured()){q.trace({destination:n},"not proxying request; GLOBAL_AGENT.HTTP_PROXY is not configured"),this.fallbackAgent.addRequest(e,t);return}if(!this.mustUrlUseProxy(n)){q.trace({destination:n},"not proxying request; url matches GLOBAL_AGENT.NO_PROXY"),this.fallbackAgent.addRequest(e,t);return}let s=Vu++,i=this.getUrlProxy(n);this.protocol==="http:"&&(e.path=n,i.authorization&&e.setHeader("proxy-authorization","Basic "+Buffer.from(i.authorization).toString("base64"))),q.trace({destination:n,proxy:"http://"+i.hostname+":"+i.port,requestId:s},"proxying request"),e.on("error",u=>{q.error({error:(0,Ws.serializeError)(u)},"request error")}),e.once("response",u=>{q.trace({headers:u.headers,requestId:s,statusCode:u.statusCode},"proxying response")}),e.shouldKeepAlive=!1;let o={host:t.hostname||t.host,port:t.port||80,proxy:i,tls:{}};this.protocol==="https:"&&(o.tls={ca:t.ca,cert:t.cert,ciphers:t.ciphers,clientCertEngine:t.clientCertEngine,crl:t.crl,dhparam:t.dhparam,ecdhCurve:t.ecdhCurve,honorCipherOrder:t.honorCipherOrder,key:t.key,passphrase:t.passphrase,pfx:t.pfx,rejectUnauthorized:t.rejectUnauthorized,secureOptions:t.secureOptions,secureProtocol:t.secureProtocol,servername:t.servername||o.host,sessionIdContext:t.sessionIdContext},typeof process.env.NODE_TLS_REJECT_UNAUTHORIZED=="string"&&(0,Fu.boolean)(process.env.NODE_TLS_REJECT_UNAUTHORIZED)===!1&&(o.tls.rejectUnauthorized=!1)),this.createConnection(o,(u,l)=>{q.trace({target:o},"connecting"),l&&(l.setTimeout(this.socketConnectionTimeout,()=>{l.destroy()}),l.once("connect",()=>{q.trace({target:o},"connected"),l.setTimeout(0)}),l.once("secureConnect",()=>{q.trace({target:o},"connected (secure)"),l.setTimeout(0)})),u?e.emit("error",u):(q.debug("created socket"),l.on("error",v=>{q.error({error:(0,Ws.serializeError)(v)},"socket error")}),e.onSocket(l))})}},ku=Zs;Je.default=ku});var ri=c(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.default=void 0;var Yu=Qs(require("net")),zu=Qs(Ke());function Qs(r){return r&&r.__esModule?r:{default:r}}var ei=class extends zu.default{constructor(...e){super(...e);this.protocol="http:",this.defaultPort=80}createConnection(e,t){let n=Yu.default.connect(e.proxy.port,e.proxy.hostname);t(null,n)}},Ju=ei;We.default=Ju});var ni=c(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.default=void 0;var Ku=Br(require("net")),Wu=Br(require("tls")),Zu=Br(Ke());function Br(r){return r&&r.__esModule?r:{default:r}}var ti=class extends Zu.default{constructor(...e){super(...e);this.protocol="https:",this.defaultPort=443}createConnection(e,t){let n=Ku.default.connect(e.proxy.port,e.proxy.hostname);n.on("error",i=>{t(i)}),n.once("data",()=>{let i=Wu.default.connect(rt(w({},e.tls),{socket:n}));t(null,i)});let s="";s+="CONNECT "+e.host+":"+e.port+` HTTP/1.1\r
`,s+="Host: "+e.host+":"+e.port+`\r
`,e.proxy.authorization&&(s+="Proxy-Authorization: Basic "+Buffer.from(e.proxy.authorization).toString("base64")+`\r
`),s+=`\r
`,n.write(s)}},Qu=ti;Ze.default=Qu});var si=c(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Object.defineProperty(Ee,"Agent",{enumerable:!0,get:function(){return el.default}});Object.defineProperty(Ee,"HttpProxyAgent",{enumerable:!0,get:function(){return rl.default}});Object.defineProperty(Ee,"HttpsProxyAgent",{enumerable:!0,get:function(){return tl.default}});var el=Vr(Ke()),rl=Vr(ri()),tl=Vr(ni());function Vr(r){return r&&r.__esModule?r:{default:r}}});var ai=c((Qe,oi)=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});function nl(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ii(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function sl(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function il(r){function e(){r.apply(this,arguments)}return e.prototype=Object.create(r.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r,e}var ol=function(r){sl(e,r);function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";nl(this,e);var n=ii(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(n,n.constructor),ii(n)):(Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0}),n)}return e}(il(Error));Qe.default=ol;oi.exports=Qe.default});var rr=c(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.UnexpectedStateError=void 0;var al=ul(ai());function ul(r){return r&&r.__esModule?r:{default:r}}var ui=class extends al.default{constructor(e,t="UNEXPECTED_STATE_ERROR"){super(e);this.code=t}};er.UnexpectedStateError=ui});var ci=c(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.default=void 0;var ll=li(require("http")),cl=li(require("https"));function li(r){return r&&r.__esModule?r:{default:r}}var fl=(r,e,t)=>(...n)=>{let s,i,o;return typeof n[0]=="string"||n[0]instanceof URL?(s=n[0],typeof n[1]=="function"?(i={},o=n[1]):(i=w({},n[1]),o=n[2])):(i=w({},n[0]),o=n[1]),t?i.agent=e:(i.agent||(i.agent=e),(i.agent===ll.default.globalAgent||i.agent===cl.default.globalAgent)&&(i.agent=e)),s?r(s,i,o):r(i,o)},pl=fl;tr.default=pl});var pi=c((Tf,fi)=>{"use strict";fi.exports=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}});var di=c((Pf,Yr)=>{"use strict";var hl=pi(),kr=new Map;function hi(r,e){e=w({caseSensitive:!1},e);let t=r+JSON.stringify(e);if(kr.has(t))return kr.get(t);let n=r[0]==="!";n&&(r=r.slice(1)),r=hl(r).replace(/\\\*/g,"[\\s\\S]*");let s=new RegExp(`^${r}$`,e.caseSensitive?"":"i");return s.negated=n,kr.set(t,s),s}Yr.exports=(r,e,t)=>{if(!(Array.isArray(r)&&Array.isArray(e)))throw new TypeError(`Expected two arrays, got ${typeof r} ${typeof e}`);if(e.length===0)return r;let n=e[0][0]==="!";e=e.map(i=>hi(i,t));let s=[];for(let i of r){let o=n;for(let u of e)u.test(i)&&(o=!u.negated);o&&s.push(i)}return s};Yr.exports.isMatch=(r,e,t)=>{let n=Array.isArray(r)?r:[r],s=Array.isArray(e)?e:[e];return n.some(i=>s.every(o=>{let u=hi(o,t),l=u.test(i);return u.negated?!l:l}))}});var vi=c(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.default=void 0;var dl=require("url"),gl=vl(di()),gi=rr();function vl(r){return r&&r.__esModule?r:{default:r}}var El=(r,e)=>{let t=(0,dl.parse)(r),n=e.split(/[\s,]+/);for(let s of n){let i=s.replace(/^(?<leadingDot>\.)/,"*").match(/^(?<hostname>.+?)(?::(?<port>\d+))?$/);if(!i||!i.groups)throw new gi.UnexpectedStateError("Invalid NO_PROXY pattern.");if(!i.groups.hostname)throw new gi.UnexpectedStateError("NO_PROXY entry pattern must include hostname. Use * to match any hostname.");if(gl.default.isMatch(t.hostname,i.groups.hostname)&&(!i.groups||!i.groups.port||t.port&&t.port===i.groups.port))return!0}return!1},yl=El;nr.default=yl});var Ei=c(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.default=void 0;var ml=require("url"),zr=rr(),Ol=r=>{let e=(0,ml.parse)(r);if(e.query!==null)throw new zr.UnexpectedStateError("Unsupported `GLOBAL_AGENT.HTTP_PROXY` configuration value: URL must not have query.");if(e.hash!==null)throw new zr.UnexpectedStateError("Unsupported `GLOBAL_AGENT.HTTP_PROXY` configuration value: URL must not have hash.");if(e.protocol!=="http:")throw new zr.UnexpectedStateError('Unsupported `GLOBAL_AGENT.HTTP_PROXY` configuration value: URL protocol must be "http:".');let t=80;return e.port&&(t=Number.parseInt(e.port,10)),{authorization:e.auth||null,hostname:e.hostname,port:t}},bl=Ol;sr.default=bl});var yi=c(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});Object.defineProperty(ye,"bindHttpMethod",{enumerable:!0,get:function(){return _l.default}});Object.defineProperty(ye,"isUrlMatchingNoProxy",{enumerable:!0,get:function(){return Rl.default}});Object.defineProperty(ye,"parseProxyUrl",{enumerable:!0,get:function(){return Al.default}});var _l=Jr(ci()),Rl=Jr(vi()),Al=Jr(Ei());function Jr(r){return r&&r.__esModule?r:{default:r}}});var Kr=c(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.default=void 0;var Nl=xl(ne());function xl(r){return r&&r.__esModule?r:{default:r}}var Tl=Nl.default.child({namespace:"createProxyController"}),Pl=["HTTP_PROXY","HTTPS_PROXY","NO_PROXY"],Sl=()=>new Proxy({HTTP_PROXY:null,HTTPS_PROXY:null,NO_PROXY:null},{set:(r,e,t)=>{if(!Pl.includes(e))throw new Error('Cannot set an unmapped property "'+e+'".');return r[e]=t,Tl.info({change:{name:e,value:t},newConfiguration:r},"configuration changed"),!0}}),$l=Sl;ir.default=$l});var Ri=c(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.default=void 0;var W=me(require("http")),Z=me(require("https")),wl=Re(),mi=me(zs()),ql=me(ne()),Oi=si(),Il=rr(),K=yi(),Ll=me(Kr());function me(r){return r&&r.__esModule?r:{default:r}}var Dl=W.default.get,Cl=W.default.request,Gl=Z.default.get,jl=Z.default.request,bi=ql.default.child({namespace:"createGlobalProxyAgent"}),_i={environmentVariableNamespace:void 0,forceGlobalAgent:void 0,socketConnectionTimeout:6e4},Ml=r=>{let e=Object.keys(r),t={};for(let n of e){let s=r[n];s!==void 0&&(t[n]=s)}return t},Ul=r=>{let e=process.env,t={environmentVariableNamespace:typeof e.GLOBAL_AGENT_ENVIRONMENT_VARIABLE_NAMESPACE=="string"?e.GLOBAL_AGENT_ENVIRONMENT_VARIABLE_NAMESPACE:"GLOBAL_AGENT_",forceGlobalAgent:typeof e.GLOBAL_AGENT_FORCE_GLOBAL_AGENT=="string"?(0,wl.boolean)(e.GLOBAL_AGENT_FORCE_GLOBAL_AGENT):!0,socketConnectionTimeout:typeof e.GLOBAL_AGENT_SOCKET_CONNECTION_TIMEOUT=="string"?Number.parseInt(e.GLOBAL_AGENT_SOCKET_CONNECTION_TIMEOUT,10):_i.socketConnectionTimeout};return w(w({},t),Ml(r))},Xl=(r=_i)=>{let e=Ul(r),t=(0,Ll.default)();t.HTTP_PROXY=process.env[e.environmentVariableNamespace+"HTTP_PROXY"]||null,t.HTTPS_PROXY=process.env[e.environmentVariableNamespace+"HTTPS_PROXY"]||null,t.NO_PROXY=process.env[e.environmentVariableNamespace+"NO_PROXY"]||null,bi.info({configuration:e,state:t},"global agent has been initialized");let n=g=>f=>g()?t.NO_PROXY?!(0,K.isUrlMatchingNoProxy)(f,t.NO_PROXY):!0:!1,s=g=>()=>{let f=g();if(!f)throw new Il.UnexpectedStateError("HTTP(S) proxy must be configured.");return(0,K.parseProxyUrl)(f)},i=()=>t.HTTP_PROXY,o=class extends Oi.HttpProxyAgent{constructor(){super(()=>i(),n(i),s(i),W.default.globalAgent,e.socketConnectionTimeout)}},u=new o,l=()=>t.HTTPS_PROXY||t.HTTP_PROXY,v=class extends Oi.HttpsProxyAgent{constructor(){super(()=>l(),n(l),s(l),Z.default.globalAgent,e.socketConnectionTimeout)}},a=new v;return mi.default.gte(process.version,"v11.7.0")&&(W.default.globalAgent=u,Z.default.globalAgent=a),mi.default.gte(process.version,"v10.0.0")?(W.default.get=(0,K.bindHttpMethod)(Dl,u,e.forceGlobalAgent),W.default.request=(0,K.bindHttpMethod)(Cl,u,e.forceGlobalAgent),Z.default.get=(0,K.bindHttpMethod)(Gl,a,e.forceGlobalAgent),Z.default.request=(0,K.bindHttpMethod)(jl,a,e.forceGlobalAgent)):bi.warn("attempt to initialize global-agent in unsupported Node.js version was ignored"),t},Fl=Xl;or.default=Fl});var Wr=c(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});Object.defineProperty(ar,"createGlobalProxyAgent",{enumerable:!0,get:function(){return Hl.default}});Object.defineProperty(ar,"createProxyController",{enumerable:!0,get:function(){return Bl.default}});var Hl=Ai(Ri()),Bl=Ai(Kr());function Ai(r){return r&&r.__esModule?r:{default:r}}});var Ni=c(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.default=void 0;var Vl=Yl(ne()),kl=Wr();function Yl(r){return r&&r.__esModule?r:{default:r}}var zl=Vl.default.child({namespace:"bootstrap"}),Jl=r=>global.GLOBAL_AGENT?(zl.warn("found global.GLOBAL_AGENT; second attempt to bootstrap global-agent was ignored"),!1):(global.GLOBAL_AGENT=(0,kl.createGlobalProxyAgent)(r),!0),Kl=Jl;ur.default=Kl});var xi=c(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Object.defineProperty(Zr,"bootstrap",{enumerable:!0,get:function(){return Wl.default}});var Wl=Zl(Ni());function Zl(r){return r&&r.__esModule?r:{default:r}}});var Ti=c(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});Object.defineProperty(lr,"bootstrap",{enumerable:!0,get:function(){return Ql.bootstrap}});Object.defineProperty(lr,"createGlobalProxyAgent",{enumerable:!0,get:function(){return ec.createGlobalProxyAgent}});var Ql=xi(),ec=Wr()});var Pi="EnableGlobalProxyEnvironmentVariable",rc=r=>/\s/.test(r)?JSON.stringify(r):r;if(globalThis.process!=null&&globalThis.process.env[Pi]){let{bootstrap:r}=Ti();r()}var tc={name:"@ArTs/plugin-http-proxy",factory:function(){return{hooks:{setupScriptEnvironment:function(r,e){let t=e.NODE_OPTIONS||"",n=`--require ${rc(__filename)}`;return t=t?`${n} ${t}`:n,e.NODE_OPTIONS=t,e[Pi]="true",e.GLOBAL_AGENT_ENVIRONMENT_VARIABLE_NAMESPACE="",Promise.resolve()}}}}};module.exports=tc;
//# sourceMappingURL=index.cjs.map
